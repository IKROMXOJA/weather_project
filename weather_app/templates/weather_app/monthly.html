<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1 Oylik Ob-havo</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 20px; background: linear-gradient(to right,#fbc2eb,#a6c1ee);}
        h1 { margin-bottom: 20px; }
        ul { list-style: none; padding: 0; }
        li { background: rgba(255,255,255,0.2); margin: 5px 0; padding: 10px; border-radius: 6px; }
    </style>
</head>
<body>

<h1>ðŸ—“ 1 Oylik Ob-havo</h1>
<ul id="monthList"></ul>

<script>
const apiKey = "532ea0981e65efede7cc050e9134f1b8"; // loyihangizdagi API kalit
async function fetchMonthWeather() {
    try {
        const response = await fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=41.3111&lon=69.2797&exclude=minutely,hourly,alerts&units=metric&appid=${apiKey}`);
        const data = await response.json();
        const monthList = document.getElementById("monthList");
        monthList.innerHTML = "";

        // Premium API bo'lsa 30 kunlik, Free API bo'lsa 7 kunlik
        const daysToShow = data.daily.length >= 30 ? 30 : data.daily.length;

        data.daily.slice(0, daysToShow).forEach(day => {
            const date = new Date(day.dt * 1000);
            monthList.innerHTML += `<li>${date.toLocaleDateString('uz-UZ', { weekday:'short', day:'numeric', month:'short' })}: ${day.weather[0].description}, ${Math.round(day.temp.day)}Â°C</li>`;
        });
    } catch (err) {
        console.error("Xatolik:", err);
        document.getElementById("monthList").innerHTML = "<li>Ob-havo ma'lumotini olishda xatolik yuz berdi.</li>";
    }
}
fetchMonthWeather();
</script>

</body>
</html>
